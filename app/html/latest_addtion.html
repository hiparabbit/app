<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>新增入库</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/aui.2.0.css">
    <style>
        html,body{font-family: "微软雅黑"; margin:0; padding:0;}
        .aui-list-header{text-align:center; height:40px;} 
        .aui-list-header p{color:#fff;}
        .addtion-bottom{width:100%;height:40px; background-color: #444444; position:absolute; left:0; bottom:0;}
        .addtion-bottom p{color:#fff; height:40px; position: absolute; left:50%; top:0; line-height:40px;}
        .addtion-bottom img{width:36px;height:36px; position:absolute; left:50%; top:2px; margin-left: -42px; border:none;}
    </style>
</head>
<body>
    <header class="aui-bar aui-bar-nav">
        <a class="aui-pull-left aui-btn"  tapmode onclick="closeWin('latest_addtion')">
            <span class="aui-iconfont aui-icon-left"></span>
        </a>
        <div class="aui-title">新增入库</div>
        <a class="aui-pull-right aui-btn">
            <span class="aui-iconfont"></span>
        </a>
    </header>
    <div class="aui-content aui-margin-b-15">
        <ul class="aui-list aui-form-list">
            <li class="aui-list-item" onclick="openPicker(this)">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-label">单据日期</div>
                    <div class="aui-list-item-input">
                        <input type="text" placeholder="2016-9-27" disabled="disabled">
                    </div>
                </div>
            </li>
            <li class="aui-list-item" onclick="openSelect(this)">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-label">单据编号</div>
                    <div class="aui-list-item-input">
                        <input type="text" placeholder="单据编号" disabled>
                    </div>
                </div>
            </li>
            <li class="aui-list-item" onclick="openSelect(this)">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-label">仓库</div>
                    <div class="aui-list-item-input">
                        <input type="text" placeholder="仓库" disabled>
                    </div>
                </div>
            </li>
            <li class="aui-list-item" onclick="openSelect(this)">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-label">部门</div>
                    <div class="aui-list-item-input">
                        <input type="text" placeholder="部门" disabled>
                    </div>
                </div>
            </li>
            <li class="aui-list-item">
                    <div class="aui-list-item-label">备注</div>
                    <div class="aui-list-item-input">
                        <textarea placeholder="备注"></textarea>
                    </div>
            </li>
        </ul>
    </div> 
    <div class="addtion-bottom" tapmode onclick="openWin('latest_addtion-2','./latest_addtion-2.html')">
        <img src="../image/addtion-bottom.png" alt="addtion">
        <p>添加货品</p>
    </div>       
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/zepto.min.js"></script>
<script type="text/javascript" src="../script/touch.js"></script>
<script type="text/javascript" src="../script/common.js"></script>
<script type="text/javascript" src="../script/zmeat-popup.js"></script>
<script type="text/javascript">
apiready = function(){
    $api.fixStatusBar( $api.dom('header') );
    api.setStatusBarStyle({
        style: 'dark',
        color: "#33475f"
    });       
};

function openPicker(that){
    api.openPicker({
        type: 'date',
        date: (new Date()).Format("yyyy-MM-dd HH:mm"), //'2014-05-01 12:30'
        title: '请选择日期'
    }, function(ret, err) {
        if (ret) {
            var date = ret.year+"-"+(ret.month>=10 ? ret.month : "0"+ret.month)+"-"+(ret.day>=10 ? ret.day : "0"+ret.day);
            $(that).find('input').val(date);
        } else {
            alert(JSON.stringify(err));
        }
    });
}

function openSelect(that){
    var selects = [
        { name: 'item1', code: 1},
        { name: 'item2', code: 2},
        { name: 'item3', code: 3}
    ];
    var popup = new zmeatPopup(selects);

    popup.open(function(data){
        $(that).find('input').val(data.name);
        popup.close();
    });
}
</script>
</html>